<!DOCTYPE html>
<html>
	<head>
	</head>
	<body onload="startGame()">
		<canvas id="game area" width="400" height="400" style="border:1px solid #c3c3c3;">
		</canvas>
		<script>
			const startGame = () => {
				theGame.start();
			}

			let player = {
				xPos: 200,
				yPos: 200,
				vX: 0,
				vY: 0,
			}
			let keys = {
				87: false,
				65: false,
				83: false,
				68: false
				
			}
			const theGame = {
				canvas : document.getElementById("game area"),
				start : function() {
					this.canvas.width = 480;
					this.canvas.height = 270;
					this.context = this.canvas.getContext("2d");
					this.interval = setInterval(updateGame, 20);
					window.addEventListener('keydown', function (e) {
							e.preventDefault();
							keys[e.keyCode] = true;
						})
					window.addEventListener('keyup', function (e) {
						keys[e.keyCode] = false;
					})
				},
				stop : function() {
					clearInterval(this.interval);
				},
				clear : function() {
					this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
				}
			}
			const updateGame = () => {
				theGame.clear();
				if (keys[87]) {
					player.vY = 1;
				} else if (keys[65]) {
					player.vX = -1;
				} else if (keys[83]) {
					player.vY = -1;
				} else if (keys[68]) {
					player.vX = 1;
				}
				player.xPos += player.vX;
				player.yPos += player.vY;
				
				//newPos();
				update();
			}
			const update = () => {
				let canvas = theGame.canvas;
				var shapes = canvas.getContext("2d");
				shapes.fillStyle = "#FF0000";
				shapes.beginPath();
				shapes.arc(player.xPos,player.yPos,5,0,2*Math.PI);
				shapes.stroke();
			}
			
		</script>
	</body>
</html>
